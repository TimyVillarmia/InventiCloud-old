@inherits LayoutComponentBase
@using Microsoft.AspNetCore.Components.Authorization

<MudThemeProvider />
<MudPopoverProvider />
<MudDialogProvider />
<MudSnackbarProvider />

<CascadingAuthenticationState>
    <AuthorizeView>
        <Authorized>
            <MudLayout>
                <MudAppBar Elevation="1">
                    <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="@DrawerToggle" />
                    <MudText Typo="Typo.h5" Class="ml-3">InventiCloud</MudText>
                    <MudSpacer />
                    <MudIconButton Icon="@Icons.Material.Filled.MoreVert" Color="Color.Inherit" Edge="Edge.End" />
                </MudAppBar>
                <MudDrawer @bind-Open="_drawerOpen" ClipMode="DrawerClipMode.Always" Elevation="2">
                    <NavMenu />
                </MudDrawer>
                <MudMainContent Class="mt-16 pa-4">
                    @Body
                </MudMainContent>
            </MudLayout>
        </Authorized>
        <NotAuthorized>
            <MudLayout>
                <MudContainer MaxWidth="MaxWidth.ExtraExtraLarge" >
                    @Body
                </MudContainer>
            </MudLayout>
            
        </NotAuthorized>
    </AuthorizeView>
</CascadingAuthenticationState>
@code {
    private bool _drawerOpen = true;

    private void DrawerToggle()
    {
        _drawerOpen = !_drawerOpen;
    }
}